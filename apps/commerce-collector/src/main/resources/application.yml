spring:
  application:
    name: commerce-collector
  profiles:
    active: local
  config:
    import:
      - jpa.yml
      - redis.yml
      - kafka.yml
      - logging.yml

server:
  port: 8888

management:
  server:
    port: 8889

# Collector 전용 Kafka 설정 override
---
spring:
  config:
    activate:
      on-profile: local, test
  kafka:
    consumer:
      group-id: commerce-collector-group
      auto-offset-reset: latest
      properties:
        max.poll.records: 10
        enable.auto.commit: false
    listener:
      concurrency: 3
      ack-mode: manual

# commerce-api URL 설정
external:
  commerce-api:
    url: http://localhost:8080

# 재고 임계값 설정
cache:
  stock:
    threshold:
      quantity: 10      # 절대 임계값 (10개 이하면 캐시 갱신)

---
spring:
  config:
    activate:
      on-profile: local, test

---
spring:
  config:
    activate:
      on-profile: dev

---
spring:
  config:
    activate:
      on-profile: qa

---
spring:
  config:
    activate:
      on-profile: prd

springdoc:
  api-docs:
    enabled: false